# –ó–∞–¥–∞–Ω–∏–µ 2. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –¥–∏–∑–∞–π–Ω–∞ –º–æ–¥—É–ª—è –ø–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö

## –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏

–û–Ω–ª–∞–π–Ω-–º–∞–≥–∞–∑–∏–Ω—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∫–∞–∂–¥–æ–µ —É—Ç—Ä–æ –≤ 6:00 –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ CSV/XLS –ø—Ä–∞–π—Å-–ª–∏—Å—Ç—ã –¥–ª—è B2B-–∫–ª–∏–µ–Ω—Ç–æ–≤.

**–î–∞–Ω–Ω—ã–µ:**
- products: 5-10K —Å—Ç—Ä–æ–∫
- categories: 50-200 —Å—Ç—Ä–æ–∫  
- clients: 100-500 —Å—Ç—Ä–æ–∫
- client_prices: 10-20K —Å—Ç—Ä–æ–∫

**–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:** –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –≤ K8s (–æ–±–ª–∞–∫–æ)

---

## 1. –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ä–µ—à–µ–Ω–∏–π

| –ö—Ä–∏—Ç–µ—Ä–∏–π | Spring Batch | Apache Airflow | **K8s Job** | Spark |
|----------|--------------|----------------|-------------|-------|
| **–†–µ—Å—É—Ä—Å–æ—ë–º–∫–æ—Å—Ç—å** | üü¢ 200-500 MB<br/>–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π | üü° 1-2 GB<br/>–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π | üü¢ 256-512 MB<br/>–¢–æ–ª—å–∫–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ | üî¥ >2 GB<br/>–ö–ª–∞—Å—Ç–µ—Ä |
| **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—å** | üü° –°—Ä–µ–¥–Ω—è—è<br/>–ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ | üü¢ –•–æ—Ä–æ—à–∞—è<br/>–°—Ä–µ–¥–Ω—è—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å | üü¢ –•–æ—Ä–æ—à–∞—è<br/>–ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ | üü¢ –û—Ç–ª–∏—á–Ω–∞—è<br/>–í—ã—Å–æ–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å |
| **–†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** | üü¢ –ü—Ä–æ—Å—Ç–æ–µ<br/>–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å | üî¥ –°–ª–æ–∂–Ω–æ–µ<br/>–û—Ç–¥–µ–ª—å–Ω–∞—è –∏–Ω—Ñ—Ä–∞ | üü¢ –ü—Ä–æ—Å—Ç–æ–µ<br/>K8s native | üî¥ –°–ª–æ–∂–Ω–æ–µ<br/>Spark –∫–ª–∞—Å—Ç–µ—Ä |
| **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** | üü¢ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ | üü¢ –í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ | üü° –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ | üü° –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ |

### –í—ã–±–æ—Ä: **K8s Job + CronJob**

**–ü–æ—á–µ–º—É:**
- –ü—Ä–æ—Å—Ç–∞—è –∑–∞–¥–∞—á–∞ ‚Äî —Ç–æ–ª—å–∫–æ SQL –∏ —ç–∫—Å–ø–æ—Ä—Ç CSV
- –ú–∞–ª—ã–π –æ–±—ä—ë–º –¥–∞–Ω–Ω—ã—Ö (5-10K —Å—Ç—Ä–æ–∫)
- –£–∂–µ –µ—Å—Ç—å K8s ‚Äî –Ω–µ –Ω—É–∂–Ω—ã –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- –≠–∫–æ–Ω–æ–º–∏—è ‚Äî —Ä–µ—Å—É—Ä—Å—ã —Ç–æ–ª—å–∫–æ –Ω–∞ 5-10 –º–∏–Ω—É—Ç –≤ —Å—É—Ç–∫–∏
- –ü—Ä–æ—Å—Ç–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

**–ü–æ—á–µ–º—É –ù–ï –¥—Ä—É–≥–∏–µ:**
- **Spring Batch** ‚Äî –∏–∑–±—ã—Ç–æ—á–µ–Ω, –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å
- **Airflow** ‚Äî –∏–∑–±—ã—Ç–æ—á–µ–Ω –¥–ª—è –æ–¥–Ω–æ–π –∑–∞–¥–∞—á–∏
- **Spark** ‚Äî –∏–∑–±—ã—Ç–æ—á–µ–Ω –¥–ª—è –º–∞–ª—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

–î–∏–∞–≥—Ä–∞–º–º–∞: [architecture.puml](./architecture.puml)

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **06:00** ‚Äî CronJob —Å–æ–∑–¥–∞—ë—Ç Pod
2. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ** ‚Äî Pod —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ PostgreSQL
3. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è** ‚Äî –°–æ–∑–¥–∞–Ω–∏–µ CSV –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** ‚Äî –ó–∞–≥—Ä—É–∑–∫–∞ –≤ S3
5. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ** ‚Äî Pod —É–¥–∞–ª—è–µ—Ç—Å—è

---

## 3. –ü–ª–∞–Ω –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏–∏ (9-11 –¥–Ω–µ–π)

| –≠—Ç–∞–ø | –í—Ä–µ–º—è | –ß—Ç–æ –¥–µ–ª–∞—Ç—å |
|------|-------|------------|
| 1. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ | 1-2 –¥–Ω—è | S3 bucket, DB user, Secrets |
| 2. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ | 2-3 –¥–Ω—è | –°–∫—Ä–∏–ø—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞, Docker –æ–±—Ä–∞–∑ |
| 3. K8s –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ | 1 –¥–µ–Ω—å | CronJob –º–∞–Ω–∏—Ñ–µ—Å—Ç |
| 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | 2 –¥–Ω—è | –õ–æ–∫–∞–ª—å–Ω–æ, dev, –Ω–∞–≥—Ä—É–∑–∫–∞ |
| 5. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ | 1 –¥–µ–Ω—å | Prometheus, Grafana, –∞–ª–µ—Ä—Ç—ã |
| 6. Production | 1 –¥–µ–Ω—å | –î–µ–ø–ª–æ–π, –ø—Ä–æ–≤–µ—Ä–∫–∞ |
| 7. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | 1 –¥–µ–Ω—å | Runbook |

**–†–µ—Å—É—Ä—Å—ã:** 200m CPU, 256Mi RAM  
**–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:** 5-10 –º–∏–Ω—É—Ç  

---

## 4. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
- –ë—ã—Å—Ç—Ä–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ
- –õ—ë–≥–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

---

## 5. –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- –§–æ—Ä–º–∞—Ç—ã XLS, JSON
- Email-—Ä–∞—Å—Å—ã–ª–∫–∞